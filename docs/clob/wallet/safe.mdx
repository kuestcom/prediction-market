---
title: 'Deploy Safe wallet'
openapi: 'POST /wallet/safe'
---
export const ENV = globalThis.process?.env ?? {}

Create the deterministic Gnosis Safe proxy associated with your authenticated {ENV.NEXT_PUBLIC_SITE_NAME} account. This endpoint uses the same L2 headers as [`POST /order`](/api-reference/trade/post-a-new-order) and only deploys the wallet when the signed payload matches your API key owner.

<Info>
Send `KUEST_ADDRESS`, `KUEST_SIGNATURE`, `KUEST_TIMESTAMP`, `KUEST_API_KEY`, and `KUEST_PASSPHRASE` with every request. The `owner` field must match `KUEST_ADDRESS` exactly.
</Info>

<Note>
`paymentToken` defaults to `0x0000000000000000000000000000000000000000` for MATIC-denominated fees. `payment` usually stays `"0"` and `paymentReceiver` may remain the zero address when the deployment is free.
</Note>

## Request body

### Root fields

| Field | Type | Required | Description |
| --- | --- | --- | --- |
| `owner` | string | Yes | Polygon/EVM address that owns the Safe; must equal the authenticated `KUEST_ADDRESS`. |
| `paymentToken` | string | No | Token used to pay deployment costs. Defaults to the zero address (MATIC). |
| `payment` | string | No | Decimal wei amount charged for deployment. Defaults to `"0"`. |
| `paymentReceiver` | string | No | Address that receives `payment` when non-zero. Defaults to the zero address. |
| `signature` | string | Yes | EIP-712 `CreateProxy` signature generated by the owner against the Safe Proxy Factory domain. |

All numeric values must be sent as decimal strings; addresses must be zero-padded hex (EIP-55 casing optional). The backend rejects uppercase hex without `0x`, negative values, or mismatched owners.

## Signature steps

1. Build the typed data struct `CreateProxy(address paymentToken,uint256 payment,address paymentReceiver)` using your intended values.
2. Use `signTypedData_v4` (or equivalent) with domain:  
   `{ name: "Contract Proxy Factory", chainId: <current chain>, verifyingContract: <SAFE_PROXY_FACTORY_ADDRESS> }`.
3. Submit the signed hex string as the `signature` field. Reusing signatures or modifying fields without re-signing causes `safe proxy deployment reverted`.

## Responses and errors

| Status | Body | Description |
| --- | --- | --- |
| `200` | `{"txHash":"...","confirmations":1}` | Safe deployment transaction accepted or reused from a prior execution. |
| `400` | `{"error":"owner_address_mismatch"}` | `owner` differs from `KUEST_ADDRESS`. |
| `400` | `{"error":"invalid_field ... "}` | Bad address/hex/value formatting or missing required fields. |
| `400` | `{"error":"safe proxy deployment reverted"}` | SafeProxyFactory reverted (wrong signature, conflicting proxy salt, etc.). |
| `502` | `{"error":"wallet_transport_error: ..."}` | RPC or relay transport failure before deployment finalized. |
| `503` | `{"error":"wallet_service_disabled"}` | Wallet service missing or not configured in the environment. |

`txHash` is the SafeProxyFactory transaction hash. When the Safe already exists, the endpoint returns `0x0000000000000000000000000000000000000000000000000000000000000000` to indicate no new transaction was sent. `confirmations` still reflects the configured wait target. The wallet address is derived deterministically; check your explorer once the transaction confirms if you need to verify the deployed Safe instance.
